---

ansible_python_interpreter: auto
ansible_user: entrant
gunicorn_group: webapps


git_repo: git@github.com:aovlexus/ya_test_rest.git
git_branch: master


# Application settings.
app_dir: "/home/entrant/ya_test_rest"
project_name: ya_test_rest
application_name: ya_test

project_path: "{{ app_dir }}/{{ project_name }}"
django_project_path: "{{ project_path }}/{{ application_name }}"
virtualenv_path: "{{ project_path }}_venv"
application_log_dir: "{{ project_path }}_logs"
application_log_file: "{{ application_log_dir }}/gunicorn_supervisor.log"
requirements_file: "{{ project_path }}/conf/requirements.freeze"

# Database settings
db_name: "{{ project_name }}"
db_password: dPeK5zDEv7mI4s6GE4GhnWJwudx8O2aIrhKUBM6Z
db_host: localhost
db_user: "{{ project_name }}"
postgresql_version: 10

# Gunicorn settings
gunicorn_start_script_file: "{{ virtualenv_path }}/bin/gunicorn_start.sh"
gunicorn_user: "{{ ansible_user }}"
gunicorn_num_workers: 3
gunicorn_max_requests: 0

# Supervisor
supervisor_directory: "/etc/supervisor/conf.d"
supervisor_app_config: "{{ supervisor_directory }}/{{ application_name }}.conf"


# Nginx settings
nginx_http_port: 8080
nginx_access_log_file: "{{ application_log_dir }}/nginx_access.log"
nginx_error_log_file: "{{ application_log_dir }}/nginx_error.log"
nginx_static_dir: "{{ project_path }}_static/"
nginx_media_dir: "{{ project_path }}_media/"


# Django Environment variables
run_django_db_migrations: true
run_django_collectstatic: true

django_settings_file: "ya_test.settings"

django_environment:
  DJANGO_SETTINGS_MODULE: "{{ django_settings_file }}"
  MEDIA_ROOT: "{{ nginx_media_dir }}"
  STATIC_ROOT: "{{ nginx_static_dir }}"
  DATABASE_NAME: "{{ db_name }}"
  DATABASE_USER: "{{ db_user }}"
  DATABASE_PASSWORD: "{{ db_password }}"
  DATABASE_HOST: "{{ db_host }}"
  DATABASE_PORT: 5432
  DEBUG: 0
